{"version":3,"sources":["./src/app/pages/fluxo-cinco/fluxo-cinco-routing.module.ts","./src/app/pages/fluxo-cinco/fluxo-cinco.module.ts","./src/app/pages/fluxo-cinco/fluxo-cinco.page.ts","./src/app/pages/fluxo-cinco/fluxo-cinco.page.scss","./src/app/pages/fluxo-cinco/fluxo-cinco.page.html"],"names":[],"mappings":"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","file":"src_app_pages_fluxo-cinco_fluxo-cinco_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FluxoCincoPage } from './fluxo-cinco.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FluxoCincoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FluxoCincoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { InputTextModule } from 'primeng/inputtext';\nimport { InputMaskModule } from 'primeng/inputmask';\nimport { ButtonModule } from 'primeng/button';\nimport { CardModule } from 'primeng/card';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { MessageModule } from 'primeng/message';\nimport { ToastModule } from 'primeng/toast';\nimport { InputNumberModule } from 'primeng/inputnumber';\nimport { InputTextareaModule } from 'primeng/inputtextarea';\n\nimport { FluxoCincoPageRoutingModule } from './fluxo-cinco-routing.module';\n\nimport { FluxoCincoPage } from './fluxo-cinco.page';\nimport { DirectivesModule } from 'src/app/shared/directive/directives.module';\nimport { PipeModule } from 'src/app/shared/pipes/pipe.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    FluxoCincoPageRoutingModule,\n    DirectivesModule,\n    ButtonModule,\n    CardModule,\n    DropdownModule,\n    InputTextModule,\n    InputMaskModule,\n    MessageModule,\n    ToastModule,\n    InputNumberModule,\n    InputTextareaModule,\n    PipeModule,\n  ],\n  declarations: [FluxoCincoPage]\n})\nexport class FluxoCincoPageModule {}\n","import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { MenuController } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\n\n\nimport { MessageService } from 'primeng/api';\n\nimport { Toast } from 'src/app/shared/enumerations/toast.enum';\nimport { CreateTransacaoDTO } from 'src/app/shared/interfaces/transacoes/CreateTransacaoDTO';\nimport { LabedUser, UserDTO } from 'src/app/shared/interfaces/users/UserDTO';\nimport { StorageService } from 'src/app/shared/services/auth/storage.service';\nimport { FuncionarioService } from 'src/app/shared/services/funcionario/funcionario.service';\nimport { PreferencesService } from 'src/app/shared/services/preferences/preferences.service';\nimport { TransacaoService } from 'src/app/shared/services/transacao/transacao.service';\nimport { LoaderService } from 'src/app/shared/services/app-loader/loader.service';\nimport { TransacaoSocketService } from 'src/app/shared/webSocket/transacao/transacao-socket.service';\nimport { PerfilEnum } from 'src/app/shared/consts/Perfil.const';\n\n@Component({\n  selector: 'app-fluxo-cinco',\n  templateUrl: './fluxo-cinco.page.html',\n  styleUrls: ['./fluxo-cinco.page.scss'],\n})\nexport class FluxoCincoPage implements OnInit, OnDestroy {\n\n  @ViewChild('fileInput')\n  fileInput: ElementRef\n\n  fileSelected: string;\n\n  form: FormGroup;\n  loggedUsers: LabedUser[] = [];\n\n  currentTheme: string;\n\n  private subscriptions = new Subscription();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private router: Router,\n    private funcionarioService: FuncionarioService,\n    private storage: StorageService,\n    private toastService: MessageService,\n    private transacaoService: TransacaoService,\n    private preferenceService: PreferencesService,\n    private menu: MenuController,\n    private loaderService: LoaderService,\n    private transacaoSocketService: TransacaoSocketService,\n\n  ) {\n    this.form = this.formBuilder.group({\n      nome: ['', []],\n      valor_transacao: [, [Validators.required,]],\n      user_final_id: [, [Validators.required,]],\n      anexo: [],\n    });\n  }\n\n  ngOnInit() {\n    this.loadCurrentLoggedUsers();\n    this.currentTheme = this.preferenceService.getThemePreference();\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  ionViewWillEnter() {\n    this.menu.enable(false);\n  }\n\n  ionViewWillLeave() {\n    this.menu.enable(true);\n  }\n\n  loadCurrentLoggedUsers() {\n    const { loterica_id } = this.storage.getLocalUser().user;\n    const { id } = this.storage.getLocalUser().user;\n    const sub = this.funcionarioService.listAllUsers(loterica_id, { perfil_nomes: [PerfilEnum.OPERADOR] })\n      .subscribe(loggedUsers => {\n        this.loggedUsers = loggedUsers.filter(lu => lu.id !== id).map(lu => {\n          const newLu: any = lu;\n          newLu.label = `${lu.nome} - ${lu.perfil.nome}`;\n          return newLu;\n        });\n      });\n\n    this.subscriptions.add(sub);\n  }\n\n  createTransacao() {\n    const { loterica_id, nome } = this.storage.getLocalUser().user;\n    const { id: user_final_id, nome: userSolicitado } = this.form.get('user_final_id').value;\n\n    let nomeTransacao: string = this.form.get('nome').value;\n    if (!nomeTransacao || nomeTransacao.trim().length <= 0) {\n      const date = new Date();\n      nomeTransacao = `Fluxo 5 - de ${nome} para ${userSolicitado} às ${date.toLocaleString(\"pt-BR\")}`;\n    }\n\n    const transacao: CreateTransacaoDTO = {\n      nome: nomeTransacao.trim(),\n      local_entrada: 'Caixa',\n      local_saida: 'Caixa',\n      loterica_id,\n      quantidade_transacao: 1,\n      tipo_transacao_codigo: 5,\n      user_final_id,\n      valor_transacao: this.form.get('valor_transacao').value,\n    }\n\n    const sub = this.transacaoService.create(transacao)\n      .subscribe(response => {\n        const { id } = response;\n        this.transacaoSocketService.emitNewTransacao(id);\n        this.presentToast('success', 'Sucesso!', 'Sua transação foi criada com sucesso', Toast.mediumDuration);\n        this.router.navigateByUrl('home');\n      });\n\n    this.subscriptions.add(sub);\n  }\n\n  goBack() {\n    this.router.navigateByUrl('home');\n  }\n\n  isInputError(inputName: string): boolean {\n    const resp =\n      this.form.controls[inputName].dirty &&\n      this.form.controls[inputName].errors;\n\n    if (resp) {\n      return true;\n    }\n    return false;\n  }\n\n  disableBTN(): boolean {\n    const situacao = !this.form.valid;\n\n    return situacao;\n  }\n\n  questionTerminal() {\n    this.presentToast('warn', 'Terminal do caixa', 'Insira o terminal que você está operando', Toast.mediumDuration);\n  }\n\n  getFileButtonFill() {\n    if (this.currentTheme == 'dark') {\n      return 'outline';\n    }\n\n    return 'solid';\n  }\n\n\n  private presentToast(\n    severity: string,\n    summary: string,\n    detail: string,\n    life: Toast\n  ) {\n    this.toastService.clear();\n    this.toastService.add({\n      severity,\n      summary,\n      detail,\n      life,\n    });\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJmbHV4by1jaW5jby5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\" (click)=\\\"goBack()\\\">\\n      <ion-button style=\\\"min-width: 70px;\\\" size=\\\"large\\\" color=\\\"primary\\\" shape=\\\"round\\\" fill=\\\"outline\\\">\\n        <ion-icon style=\\\"font-size:40px\\\" name=\\\"arrow-undo-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Transf. Operadora\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content appScrollTheme>\\n  <form *ngIf=\\\"loggedUsers.length > 0\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"$event.preventDefault()\\\">\\n    <div class=\\\"default-form\\\">\\n      <ion-grid class=\\\"border\\\">\\n        <div class=\\\"limiter\\\">\\n          <ion-row style=\\\"margin-top: 5px\\\">\\n            <ion-col>\\n              <div class=\\\"p-inputgroup\\\">\\n                <span class=\\\"p-inputgroup-addon\\\"><i class=\\\"pi pi-dollar\\\"></i></span>\\n                <p-inputNumber placeholder=\\\"Custo da transação, ex: 123,999\\\" formControlName=\\\"valor_transacao\\\"\\n                  mode=\\\"decimal\\\" [minFractionDigits]=\\\"2\\\" [maxFractionDigits]=\\\"2\\\"></p-inputNumber>\\n              </div>\\n              <p-message [style]=\\\"{'margin-top': '3px'}\\\" severity=\\\"error\\\" text=\\\"Insira o custo \\\"\\n                *ngIf=\\\"isInputError('valor_transacao')\\\"></p-message>\\n            </ion-col>\\n\\n          </ion-row>\\n\\n          <ion-row>\\n            <ion-col>\\n              <div class=\\\"p-inputgroup\\\">\\n                <span class=\\\"p-inputgroup-addon\\\"><i class=\\\"pi pi-list\\\"></i></span>\\n                <p-dropdown [options]=\\\"loggedUsers\\\" placeholder=\\\"Selecione um funcionário\\\"\\n                  formControlName=\\\"user_final_id\\\" optionLabel=\\\"label\\\"></p-dropdown>\\n              </div>\\n              <p-message [style]=\\\"{ 'margin-top': '3px' }\\\" severity=\\\"error\\\" text=\\\"Selecione um funcionário\\\"\\n                *ngIf=\\\"isInputError('user_final_id')\\\"></p-message>\\n            </ion-col>\\n          </ion-row>\\n\\n          <ion-row class=\\\"ion-justify-content-end\\\">\\n            <ion-col class=\\\"ion-align-self-end\\\">\\n              <div class=\\\"btn-end\\\">\\n                <p-button label=\\\"Criar\\\" (onClick)=\\\"createTransacao()\\\" [disabled]=\\\"disableBTN()\\\" icon=\\\"pi pi-angle-right\\\"\\n                  iconPos=\\\"right\\\"></p-button>\\n              </div>\\n            </ion-col>\\n          </ion-row>\\n        </div>\\n      </ion-grid>\\n    </div>\\n  </form>\\n\\n</ion-content>\";"],"sourceRoot":"webpack:///"}