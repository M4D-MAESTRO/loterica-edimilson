{"version":3,"sources":["./src/app/pages/fluxo-quatro/fluxo-quatro-routing.module.ts","./src/app/pages/fluxo-quatro/fluxo-quatro.module.ts","./src/app/pages/fluxo-quatro/fluxo-quatro.page.ts","./src/app/shared/services/cartao/cartao.service.ts","./src/app/pages/fluxo-quatro/fluxo-quatro.page.scss","./src/app/pages/fluxo-quatro/fluxo-quatro.page.html"],"names":[],"mappings":"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","file":"src_app_pages_fluxo-quatro_fluxo-quatro_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FluxoQuatroPage } from './fluxo-quatro.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FluxoQuatroPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FluxoQuatroPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { InputTextModule } from 'primeng/inputtext';\nimport { InputMaskModule } from 'primeng/inputmask';\nimport { ButtonModule } from 'primeng/button';\nimport { CardModule } from 'primeng/card';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { MessageModule } from 'primeng/message';\nimport { ToastModule } from 'primeng/toast';\nimport { InputNumberModule } from 'primeng/inputnumber';\nimport { InputTextareaModule } from 'primeng/inputtextarea';\n\nimport { FluxoQuatroPageRoutingModule } from './fluxo-quatro-routing.module';\n\nimport { FluxoQuatroPage } from './fluxo-quatro.page';\nimport { DirectivesModule } from 'src/app/shared/directive/directives.module';\nimport { PipeModule } from 'src/app/shared/pipes/pipe.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    FluxoQuatroPageRoutingModule,\n    DirectivesModule,\n    ButtonModule,\n    CardModule,\n    DropdownModule,\n    InputTextModule,\n    InputMaskModule,\n    MessageModule,\n    ToastModule,\n    InputNumberModule,\n    InputTextareaModule,\n    PipeModule,\n  ],\n  declarations: [FluxoQuatroPage]\n})\nexport class FluxoQuatroPageModule {}\n","import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { MenuController, Platform } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\n\nimport { Camera, CameraResultType, CameraSource, Photo } from '@capacitor/camera';\nimport { Directory, Filesystem } from '@capacitor/filesystem';\n\nimport { MessageService } from 'primeng/api';\n\nimport { Toast } from 'src/app/shared/enumerations/toast.enum';\nimport { CreateTransacaoDTO } from 'src/app/shared/interfaces/transacoes/CreateTransacaoDTO';\nimport { LabedUser, UserDTO } from 'src/app/shared/interfaces/users/UserDTO';\nimport { StorageService } from 'src/app/shared/services/auth/storage.service';\nimport { FuncionarioService } from 'src/app/shared/services/funcionario/funcionario.service';\nimport { PreferencesService } from 'src/app/shared/services/preferences/preferences.service';\nimport { TransacaoService } from 'src/app/shared/services/transacao/transacao.service';\nimport { IMAGE_DIR } from 'src/config/app.config';\nimport { LocalFileDTO } from 'src/app/shared/interfaces/LocalFileDTO';\nimport { CameraUtils } from 'src/app/shared/utils/CameraUtils';\nimport { LoaderService } from 'src/app/shared/services/app-loader/loader.service';\nimport { CartaoService } from 'src/app/shared/services/cartao/cartao.service';\nimport { CartaoDTO } from 'src/app/shared/interfaces/cartoes/CartaoDTO';\nimport { TransacaoSocketService } from 'src/app/shared/webSocket/transacao/transacao-socket.service';\nimport { PerfilEnum } from 'src/app/shared/consts/Perfil.const';\n\n@Component({\n  selector: 'app-fluxo-quatro',\n  templateUrl: './fluxo-quatro.page.html',\n  styleUrls: ['./fluxo-quatro.page.scss'],\n})\nexport class FluxoQuatroPage implements OnInit, OnDestroy {\n\n  @ViewChild('fileInput')\n  fileInput: ElementRef\n\n  fileSelected: string;\n\n  form: FormGroup;\n  loggedUsers: LabedUser[] = [];\n  cartoes: CartaoDTO[] = [];\n\n  currentTheme: string;\n\n  private subscriptions = new Subscription();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private router: Router,\n    private funcionarioService: FuncionarioService,\n    private storage: StorageService,\n    private toastService: MessageService,\n    private transacaoService: TransacaoService,\n    private preferenceService: PreferencesService,\n    private menu: MenuController,\n    private platform: Platform,\n    private loaderService: LoaderService,\n    private cartaoService: CartaoService,\n    private transacaoSocketService: TransacaoSocketService,\n\n  ) {\n    this.form = this.formBuilder.group({\n      nome: ['', []],\n      valor_transacao: [, [Validators.required,]],\n      user_final_id: [, [Validators.required,]],\n      cartao_id: [, [Validators.required,]],\n      anexo: [],\n    });\n  }\n\n  ngOnInit() {\n    this.loadCurrentLoggedUsers();\n    this.loadCartoes();\n    this.currentTheme = this.preferenceService.getThemePreference();\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  ionViewWillEnter() {\n    this.menu.enable(false);\n  }\n\n  ionViewWillLeave() {\n    this.menu.enable(true);\n  }\n\n  loadCurrentLoggedUsers() {\n    const { loterica_id } = this.storage.getLocalUser().user;\n    const { id } = this.storage.getLocalUser().user;\n    const sub = this.funcionarioService.listAllUsers(loterica_id, { perfil_nomes: [PerfilEnum.GERENTE, PerfilEnum.SUPERVISOR] })\n      .subscribe(loggedUsers => {\n        this.loggedUsers = loggedUsers.filter(lu => lu.id !== id).map(lu => {\n          const newLu: any = lu;\n          newLu.label = `${lu.nome} - ${lu.perfil.nome}`;\n          return newLu;\n        });\n      });\n\n    this.subscriptions.add(sub);\n  }\n\n\n  loadCartoes() {\n    const sub = this.cartaoService.list()\n      .subscribe(data => {\n        this.cartoes = data;\n      });\n\n    this.subscriptions.add(sub);\n  }\n\n  createTransacao() {\n    const { loterica_id, nome } = this.storage.getLocalUser().user;\n    const { id: user_final_id, nome: userSolicitado } = this.form.get('user_final_id').value;\n\n    let nomeTransacao: string = this.form.get('nome').value;\n    if (!nomeTransacao || nomeTransacao.trim().length <= 0) {\n      const date = new Date();\n      nomeTransacao = `Fluxo 4 - de ${nome} para ${userSolicitado} às ${date.toLocaleString(\"pt-BR\")}`;\n    }\n\n    const transacao: CreateTransacaoDTO = {\n      nome: nomeTransacao.trim(),\n      local_entrada: 'Operadora Cartão',\n      local_saida: 'Caixa',\n      loterica_id,\n      quantidade_transacao: 1,\n      tipo_transacao_codigo: 4,\n      user_final_id,\n      valor_transacao: this.form.get('valor_transacao').value,\n      cartao_id: this.form.get('cartao_id').value,\n    }\n\n    const sub = this.transacaoService.create(transacao)\n      .subscribe(data => {\n        const { id } = data;\n        const anexo = this.form.get('anexo').value;\n        const sub = this.transacaoService.uploadAnexo(anexo, id)\n          .subscribe(response => {\n            this.transacaoSocketService.emitNewTransacao(id);\n            this.presentToast('success', 'Sucesso!', 'Sua transação foi criada com sucesso', Toast.mediumDuration);\n            this.router.navigateByUrl('home');\n          })\n        this.subscriptions.add(sub);\n      });\n\n    this.subscriptions.add(sub);\n  }\n\n  goBack() {\n    this.router.navigateByUrl('home');\n  }\n\n  isInputError(inputName: string): boolean {\n    const resp =\n      this.form.controls[inputName].dirty &&\n      this.form.controls[inputName].errors;\n\n    if (resp) {\n      return true;\n    }\n    return false;\n  }\n\n  disableBTN(): boolean {\n    const situacao = !this.form.valid;\n\n    return situacao;\n  }\n\n  questionTerminal() {\n    this.presentToast('warn', 'Terminal do caixa', 'Insira o terminal que você está operando', Toast.mediumDuration);\n  }\n\n  getFileButtonFill() {\n    if (this.currentTheme == 'dark') {\n      return 'outline';\n    }\n\n    return 'solid';\n  }\n\n\n  uploadFile(event) {\n    const file = event.target.files[0];\n    this.fileSelected = `${file.name} - ${(file.size / 1000).toFixed(2)}KB`;\n\n    this.form.get('anexo').setValue(file);\n  }\n\n  async takePhoto() {\n    const image = await Camera.getPhoto({\n      quality: 100,\n      allowEditing: false,\n      resultType: CameraResultType.Uri,\n      source: CameraSource.Camera\n    });\n\n    if (image) {\n      this.loaderService.isLoading.next(true);\n      try {\n        await this.saveImage(image);\n      } catch (e) {\n        console.error(e.message)\n        this.presentToast('error', 'Falha ao salvar a foto', e.message, Toast.mediumDuration);\n      }\n      this.loaderService.isLoading.next(false);\n    }\n  }\n\n  async saveImage(photo: Photo) {\n    const base64Data = await CameraUtils.readAsBase64(photo, this.platform);\n    const fileName = new Date().getTime() + '.png';\n\n    try {\n      await Filesystem.mkdir({\n        directory: Directory.Data,\n        path: `${IMAGE_DIR}`,\n        recursive: true,\n      });\n    } catch (e) {\n      console.error('Pasta não criada: ' + e.message);\n    }\n\n    await Filesystem.writeFile({\n      directory: Directory.Data,\n      path: `${IMAGE_DIR}/${fileName}`,\n      data: base64Data,\n    });\n\n    const readFile = await Filesystem.readFile({\n      path: `${IMAGE_DIR}/${fileName}`,\n      directory: Directory.Data,\n    });\n\n    const localPhoto: LocalFileDTO = {\n      data: `data:image/png;base64,${readFile.data}`,\n      name: fileName,\n      path: `${IMAGE_DIR}/${fileName}`\n    }\n\n    const response = await fetch(localPhoto.data);\n    const blob = await response.blob();\n\n    const file = new File([blob], fileName);\n\n    this.fileSelected = `${fileName} - ${(blob.size / 1000).toFixed(2)}KB`;\n    this.form.get('anexo').setValue(file);\n  }\n\n  private presentToast(\n    severity: string,\n    summary: string,\n    detail: string,\n    life: Toast\n  ) {\n    this.toastService.clear();\n    this.toastService.add({\n      severity,\n      summary,\n      detail,\n      life,\n    });\n  }\n\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { API_CONFIG } from 'src/config/api.config';\nimport { CartaoDTO } from '../../interfaces/cartoes/CartaoDTO';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartaoService {\n\n  constructor(\n    private http: HttpClient,\n  ) { }\n\n  list(): Observable<CartaoDTO[]> {\n    return this.http.get<CartaoDTO[]>(`${API_CONFIG.baseURL}/cartao`, {\n      responseType: 'json',\n    });\n  }\n}\n","export default \".upload-btn {\\n  height: 75px;\\n}\\n\\n.btn-keep-color {\\n  --background: var(--same-line)!important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZsdXhvLXF1YXRyby5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxZQUFBO0FBQ0o7O0FBRUE7RUFDSSx3Q0FBQTtBQUNKIiwiZmlsZSI6ImZsdXhvLXF1YXRyby5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudXBsb2FkLWJ0biB7XG4gICAgaGVpZ2h0OiA3NXB4O1xufVxuXG4uYnRuLWtlZXAtY29sb3J7XG4gICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1zYW1lLWxpbmUpIWltcG9ydGFudDtcbn0iXX0= */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\" (click)=\\\"goBack()\\\">\\n      <ion-button style=\\\"min-width: 70px;\\\" size=\\\"large\\\" color=\\\"primary\\\" shape=\\\"round\\\" fill=\\\"outline\\\">\\n        <ion-icon style=\\\"font-size:40px\\\" name=\\\"arrow-undo-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Cartão\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content appScrollTheme>\\n  <form *ngIf=\\\"loggedUsers.length > 0\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"$event.preventDefault()\\\">\\n    <div class=\\\"default-form\\\">\\n      <ion-grid class=\\\"border\\\">\\n        <div class=\\\"limiter\\\">\\n          <ion-row style=\\\"margin-top: 5px\\\">\\n            <ion-col>\\n              <div class=\\\"p-inputgroup\\\">\\n                <span class=\\\"p-inputgroup-addon\\\"><i class=\\\"pi pi-dollar\\\"></i></span>\\n                <p-inputNumber placeholder=\\\"Custo da transação, ex: 123,999\\\" formControlName=\\\"valor_transacao\\\"\\n                  mode=\\\"decimal\\\" [minFractionDigits]=\\\"2\\\" [maxFractionDigits]=\\\"2\\\"></p-inputNumber>\\n              </div>\\n              <p-message [style]=\\\"{'margin-top': '3px'}\\\" severity=\\\"error\\\" text=\\\"Insira o custo \\\"\\n                *ngIf=\\\"isInputError('valor_transacao')\\\"></p-message>\\n            </ion-col>\\n\\n          </ion-row>\\n\\n          <ion-row>\\n            <ion-col>\\n              <div class=\\\"p-inputgroup\\\">\\n                <span class=\\\"p-inputgroup-addon\\\"><i class=\\\"pi pi-list\\\"></i></span>\\n                <p-dropdown [options]=\\\"loggedUsers\\\" placeholder=\\\"Selecione um funcionário\\\"\\n                  formControlName=\\\"user_final_id\\\" optionLabel=\\\"label\\\" ></p-dropdown>\\n              </div>\\n              <p-message [style]=\\\"{ 'margin-top': '3px' }\\\" severity=\\\"error\\\" text=\\\"Selecione um funcionário\\\"\\n                *ngIf=\\\"isInputError('user_final_id')\\\"></p-message>\\n            </ion-col>\\n          </ion-row>\\n\\n          <ion-row>\\n            <ion-col>\\n              <div class=\\\"p-inputgroup\\\">\\n                <span class=\\\"p-inputgroup-addon\\\"><i class=\\\"pi pi-list\\\"></i></span>\\n                <p-dropdown [options]=\\\"cartoes\\\" placeholder=\\\"Selecione um cartão\\\"\\n                  formControlName=\\\"cartao_id\\\" optionLabel=\\\"tipo\\\" optionValue=\\\"id\\\"></p-dropdown>\\n              </div>\\n              <p-message [style]=\\\"{ 'margin-top': '3px' }\\\" severity=\\\"error\\\" text=\\\"Selecione um cartão\\\"\\n                *ngIf=\\\"isInputError('cartao_id')\\\"></p-message>\\n            </ion-col>\\n          </ion-row>\\n\\n          <ion-row>\\n            <ion-col class=\\\"ion-text-center\\\">\\n              <ion-button [fill]=\\\"getFileButtonFill()\\\" class=\\\"upload-btn\\\" (click)=\\\"fileInput.click()\\\">\\n                <ion-label class=\\\"wrap-text\\\">\\n                  Anexar <br />\\n                  Arquivo\\n                  <br />\\n                  <ion-icon style=\\\"margin-top: 5px; font-size: 24px\\\" name=\\\"folder-open-outline\\\" size=\\\"large\\\"></ion-icon>\\n                </ion-label>\\n              </ion-button>\\n              <input class=\\\"ion-hide\\\" #fileInput type=\\\"file\\\" (change)=\\\"uploadFile($event)\\\" id=\\\"file-input\\\"\\n                accept=\\\"image/png, image/jpeg\\\" />\\n            </ion-col>\\n            <ion-col class=\\\"ion-text-center\\\">\\n              <ion-button class=\\\"upload-btn\\\" [fill]=\\\"getFileButtonFill()\\\" (click)=\\\"takePhoto()\\\">\\n                <ion-label>Tirar <br />\\n                  Foto\\n                  <br />\\n                  <ion-icon style=\\\"margin-top: 5px; font-size: 20px\\\" name=\\\"camera-outline\\\">\\n                  </ion-icon>\\n                </ion-label>\\n              </ion-button>\\n\\n              <input class=\\\"ion-hide\\\" #fileInput2 type=\\\"file\\\" (change)=\\\"uploadFile($event)\\\" id=\\\"file-input\\\"\\n                accept=\\\"image/png, image/jpeg\\\" />\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col>\\n              <ion-item class=\\\"btn-keep-color\\\" >\\n                <ion-label>\\n                  {{ fileSelected }}\\n                </ion-label>\\n                <ion-icon name=\\\"information-circle\\\" size=\\\"small\\\" slot=\\\"end\\\"></ion-icon>\\n              </ion-item>\\n            </ion-col>\\n          </ion-row>\\n\\n\\n          <ion-row class=\\\"ion-justify-content-end\\\">\\n            <ion-col class=\\\"ion-align-self-end\\\">\\n              <div class=\\\"btn-end\\\">\\n                <p-button label=\\\"Criar\\\" (onClick)=\\\"createTransacao()\\\" [disabled]=\\\"disableBTN()\\\" icon=\\\"pi pi-angle-right\\\"\\n                  iconPos=\\\"right\\\"></p-button>\\n              </div>\\n            </ion-col>\\n          </ion-row>\\n        </div>\\n      </ion-grid>\\n    </div>\\n  </form>\\n\\n</ion-content>\";"],"sourceRoot":"webpack:///"}