{"version":3,"sources":["./src/app/pages/fluxo-nove/fluxo-nove-routing.module.ts","./src/app/pages/fluxo-nove/fluxo-nove.module.ts","./src/app/pages/fluxo-nove/fluxo-nove.page.ts","./src/app/pages/fluxo-nove/fluxo-nove.page.scss","./src/app/pages/fluxo-nove/fluxo-nove.page.html"],"names":[],"mappings":"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","file":"src_app_pages_fluxo-nove_fluxo-nove_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FluxoNovePage } from './fluxo-nove.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FluxoNovePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FluxoNovePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { InputTextModule } from 'primeng/inputtext';\nimport { InputMaskModule } from 'primeng/inputmask';\nimport { ButtonModule } from 'primeng/button';\nimport { CardModule } from 'primeng/card';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { MessageModule } from 'primeng/message';\nimport { ToastModule } from 'primeng/toast';\nimport { InputNumberModule } from 'primeng/inputnumber';\nimport { InputTextareaModule } from 'primeng/inputtextarea';\n\nimport { FluxoNovePageRoutingModule } from './fluxo-nove-routing.module';\n\nimport { FluxoNovePage } from './fluxo-nove.page';\n\nimport { DirectivesModule } from 'src/app/shared/directive/directives.module';\nimport { PipeModule } from 'src/app/shared/pipes/pipe.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    FluxoNovePageRoutingModule,\n    DirectivesModule,\n    ButtonModule,\n    CardModule,\n    DropdownModule,\n    InputTextModule,\n    InputMaskModule,\n    MessageModule,\n    ToastModule,\n    InputNumberModule,\n    InputTextareaModule,\n    PipeModule,\n  ],\n  declarations: [FluxoNovePage]\n})\nexport class FluxoNovePageModule {}\n","import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { MenuController, Platform } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\n\nimport { Camera, CameraResultType, CameraSource, Photo } from '@capacitor/camera';\nimport { Directory, Filesystem } from '@capacitor/filesystem';\n\nimport { MessageService } from 'primeng/api';\n\nimport { Toast } from 'src/app/shared/enumerations/toast.enum';\nimport { CreateTransacaoDTO } from 'src/app/shared/interfaces/transacoes/CreateTransacaoDTO';\nimport { LabedUser, UserDTO } from 'src/app/shared/interfaces/users/UserDTO';\nimport { StorageService } from 'src/app/shared/services/auth/storage.service';\nimport { FuncionarioService } from 'src/app/shared/services/funcionario/funcionario.service';\nimport { PreferencesService } from 'src/app/shared/services/preferences/preferences.service';\nimport { TransacaoService } from 'src/app/shared/services/transacao/transacao.service';\nimport { IMAGE_DIR } from 'src/config/app.config';\nimport { LocalFileDTO } from 'src/app/shared/interfaces/LocalFileDTO';\nimport { CameraUtils } from 'src/app/shared/utils/CameraUtils';\nimport { LoaderService } from 'src/app/shared/services/app-loader/loader.service';\nimport { TransacaoSocketService } from 'src/app/shared/webSocket/transacao/transacao-socket.service';\nimport { PerfilEnum } from 'src/app/shared/consts/Perfil.const';\nimport { ProdutoDTO } from 'src/app/shared/interfaces/produtos/ProdutoDTO';\nimport { ProdutoService } from 'src/app/shared/services/produto/produto.service';\n\n@Component({\n  selector: 'app-fluxo-nove',\n  templateUrl: './fluxo-nove.page.html',\n  styleUrls: ['./fluxo-nove.page.scss'],\n})\nexport class FluxoNovePage implements OnInit, OnDestroy {\n\n  @ViewChild('fileInput')\n  fileInput: ElementRef\n\n  fileSelected: string;\n\n  form: FormGroup;\n  loggedUsers: LabedUser[] = [];\n  produtos: ProdutoDTO[] = [];\n\n  currentTheme: string;\n\n  private subscriptions = new Subscription();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private router: Router,\n    private funcionarioService: FuncionarioService,\n    private storage: StorageService,\n    private toastService: MessageService,\n    private transacaoService: TransacaoService,\n    private preferenceService: PreferencesService,\n    private menu: MenuController,\n    private platform: Platform,\n    private loaderService: LoaderService,\n    private produtoService: ProdutoService,\n    private transacaoSocketService: TransacaoSocketService,\n\n  ) {\n    this.form = this.formBuilder.group({\n      nome: ['', []],\n      valor_transacao: [, [Validators.required,]],\n      quantidade: ['1', [Validators.required,]],\n      user_final_id: [, [Validators.required,]],\n      produto_id: [, [Validators.required,]],\n      anexo: [],\n    });\n  }\n\n  ngOnInit() {\n    this.loadCurrentLoggedUsers();\n    this.loadProdutos();\n    this.currentTheme = this.preferenceService.getThemePreference();\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  ionViewWillEnter() {\n    this.menu.enable(false);\n  }\n\n  ionViewWillLeave() {\n    this.menu.enable(true);\n  }\n\n  loadCurrentLoggedUsers() {\n    const { loterica_id } = this.storage.getLocalUser().user;\n    const { id } = this.storage.getLocalUser().user;\n    const sub = this.funcionarioService.listAllUsers(loterica_id, { perfil_nomes: [PerfilEnum.GERENTE, PerfilEnum.SUPERVISOR] })\n      .subscribe(loggedUsers => {\n        this.loggedUsers = loggedUsers.filter(lu => lu.id !== id).map(lu => {\n          const newLu: any = lu;\n          newLu.label = `${lu.nome} - ${lu.perfil.nome}`;\n          return newLu;\n        });\n      });\n\n    this.subscriptions.add(sub);\n  }\n\n  loadProdutos() {\n    const sub = this.produtoService.list()\n      .subscribe(data => {\n        this.produtos = data;\n      });\n\n    this.subscriptions.add(sub);\n  }\n\n  changeProduto(event) {\n    console.log(event);\n    const { preco_unitario } = event.value;\n    console.log(preco_unitario);\n    this.form.get('valor_transacao').setValue(preco_unitario);\n  }\n\n  createTransacao() {\n    const { loterica_id, nome } = this.storage.getLocalUser().user;\n    const { id: user_final_id, nome: userSolicitado } = this.form.get('user_final_id').value;\n\n    let nomeTransacao: string = this.form.get('nome').value;\n    if (!nomeTransacao || nomeTransacao.trim().length <= 0) {\n      const date = new Date();\n      nomeTransacao = `Fluxo 9 - de ${nome} para ${userSolicitado} às ${date.toLocaleString(\"pt-BR\")}`;\n    }\n\n    const valor_transacao = this.form.get('valor_transacao').value * this.form.get('quantidade').value;\n\n    const produto_id = this.form.get('produto_id').value.id;\n\n    console.log(produto_id);\n\n    const transacao: CreateTransacaoDTO = {\n      nome: nomeTransacao.trim(),\n      local_entrada: 'Produto',\n      local_saida: 'Caixa',\n      loterica_id,\n      quantidade_transacao: 1,\n      tipo_transacao_codigo: 17,\n      user_final_id,\n      valor_transacao: valor_transacao,\n      produto_id,\n    }\n\n    const sub = this.transacaoService.create(transacao)\n      .subscribe(data => {\n        const { id } = data;\n        this.transacaoSocketService.emitNewTransacao(id);\n        this.presentToast('success', 'Sucesso!', 'Sua transação foi criada com sucesso', Toast.mediumDuration);\n        this.router.navigateByUrl('home');\n      });\n\n    this.subscriptions.add(sub);\n  }\n\n  goBack() {\n    this.router.navigateByUrl('home');\n  }\n\n  isInputError(inputName: string): boolean {\n    const resp =\n      this.form.controls[inputName].dirty &&\n      this.form.controls[inputName].errors;\n\n    if (resp) {\n      return true;\n    }\n    return false;\n  }\n\n  disableBTN(): boolean {\n    const situacao = !this.form.valid;\n\n    return situacao;\n  }\n\n  questionTerminal() {\n    this.presentToast('warn', 'Terminal do caixa', 'Insira o terminal que você está operando', Toast.mediumDuration);\n  }\n\n  getFileButtonFill() {\n    if (this.currentTheme == 'dark') {\n      return 'outline';\n    }\n\n    return 'solid';\n  }\n\n\n  uploadFile(event) {\n    const file = event.target.files[0];\n    this.fileSelected = `${file.name} - ${(file.size / 1000).toFixed(2)}KB`;\n\n    this.form.get('anexo').setValue(file);\n  }\n\n  async takePhoto() {\n    const image = await Camera.getPhoto({\n      quality: 100,\n      allowEditing: false,\n      resultType: CameraResultType.Uri,\n      source: CameraSource.Camera\n    });\n\n    if (image) {\n      this.loaderService.isLoading.next(true);\n      try {\n        await this.saveImage(image);\n      } catch (e) {\n        console.error(e.message)\n        this.presentToast('error', 'Falha ao salvar a foto', e.message, Toast.mediumDuration);\n      }\n      this.loaderService.isLoading.next(false);\n    }\n  }\n\n  async saveImage(photo: Photo) {\n    const base64Data = await CameraUtils.readAsBase64(photo, this.platform);\n    const fileName = new Date().getTime() + '.png';\n\n    try {\n      await Filesystem.mkdir({\n        directory: Directory.Data,\n        path: `${IMAGE_DIR}`,\n        recursive: true,\n      });\n    } catch (e) {\n      console.error('Pasta não criada: ' + e.message);\n    }\n\n    await Filesystem.writeFile({\n      directory: Directory.Data,\n      path: `${IMAGE_DIR}/${fileName}`,\n      data: base64Data,\n    });\n\n    const readFile = await Filesystem.readFile({\n      path: `${IMAGE_DIR}/${fileName}`,\n      directory: Directory.Data,\n    });\n\n    const localPhoto: LocalFileDTO = {\n      data: `data:image/png;base64,${readFile.data}`,\n      name: fileName,\n      path: `${IMAGE_DIR}/${fileName}`\n    }\n\n    const response = await fetch(localPhoto.data);\n    const blob = await response.blob();\n\n    const file = new File([blob], fileName);\n\n    this.fileSelected = `${fileName} - ${(blob.size / 1000).toFixed(2)}KB`;\n    this.form.get('anexo').setValue(file);\n  }\n\n  private presentToast(\n    severity: string,\n    summary: string,\n    detail: string,\n    life: Toast\n  ) {\n    this.toastService.clear();\n    this.toastService.add({\n      severity,\n      summary,\n      detail,\n      life,\n    });\n  }\n\n}\n\n","export default \".upload-btn {\\n  height: 75px;\\n}\\n\\n.btn-keep-color {\\n  --background: var(--same-line)!important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZsdXhvLW5vdmUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBQTtBQUNKOztBQUVBO0VBQ0ksd0NBQUE7QUFDSiIsImZpbGUiOiJmbHV4by1ub3ZlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi51cGxvYWQtYnRuIHtcbiAgICBoZWlnaHQ6IDc1cHg7XG59XG5cbi5idG4ta2VlcC1jb2xvcntcbiAgICAtLWJhY2tncm91bmQ6IHZhcigtLXNhbWUtbGluZSkhaW1wb3J0YW50O1xufSJdfQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\" (click)=\\\"goBack()\\\">\\n      <ion-button style=\\\"min-width: 70px;\\\" size=\\\"large\\\" color=\\\"primary\\\" shape=\\\"round\\\" fill=\\\"outline\\\">\\n        <ion-icon style=\\\"font-size:40px\\\" name=\\\"arrow-undo-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Venda de Produto\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content appScrollTheme>\\n  <form *ngIf=\\\"loggedUsers.length > 0\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"$event.preventDefault()\\\">\\n    <div class=\\\"default-form\\\">\\n      <ion-grid class=\\\"border\\\">\\n        <div class=\\\"limiter\\\">\\n\\n          <ion-row style=\\\"margin-top: 5px\\\">\\n            <ion-col>\\n              <div class=\\\"p-inputgroup\\\">\\n                <span class=\\\"p-inputgroup-addon\\\"><i class=\\\"pi pi-list\\\"></i></span>\\n                <p-dropdown [options]=\\\"produtos\\\" placeholder=\\\"Selecione uma produto\\\" formControlName=\\\"produto_id\\\"\\n                  optionLabel=\\\"nome\\\"  (onChange)=\\\"changeProduto($event)\\\"></p-dropdown>\\n              </div>\\n              <p-message [style]=\\\"{ 'margin-top': '3px' }\\\" severity=\\\"error\\\" text=\\\"Selecione um produto\\\"\\n                *ngIf=\\\"isInputError('produto_id')\\\"></p-message>\\n            </ion-col>\\n          </ion-row>\\n\\n          <ion-row>\\n            <ion-col>\\n              <div class=\\\"p-inputgroup\\\">\\n                <span class=\\\"p-inputgroup-addon\\\"><i class=\\\"pi pi-dollar\\\"></i></span>\\n                <p-inputNumber placeholder=\\\"valor unitário do produto, ex: 5,99\\\" formControlName=\\\"valor_transacao\\\"\\n                  mode=\\\"decimal\\\" [minFractionDigits]=\\\"2\\\" [maxFractionDigits]=\\\"2\\\"></p-inputNumber>\\n              </div>\\n              <p-message [style]=\\\"{'margin-top': '3px'}\\\" severity=\\\"error\\\" text=\\\"Insira o custo \\\"\\n                *ngIf=\\\"isInputError('valor_transacao')\\\"></p-message>\\n            </ion-col>\\n            <ion-col>\\n              <div class=\\\"p-inputgroup\\\">\\n                <span class=\\\"p-inputgroup-addon\\\"><i class=\\\"pi pi-sort-numeric-up-alt\\\"></i></span>\\n                <p-inputNumber [min]=\\\"1\\\" placeholder=\\\"Quantidade de produto, ex: 3\\\" formControlName=\\\"quantidade\\\">\\n                </p-inputNumber>\\n              </div>\\n              <p-message [style]=\\\"{'margin-top': '3px'}\\\" severity=\\\"error\\\" text=\\\"Insira a quantidade\\\"\\n                *ngIf=\\\"isInputError('quantidade')\\\"></p-message>\\n            </ion-col>\\n\\n          </ion-row>\\n\\n          <ion-row>\\n            <ion-col>\\n              <div class=\\\"p-inputgroup\\\">\\n                <span class=\\\"p-inputgroup-addon\\\"><i class=\\\"pi pi-list\\\"></i></span>\\n                <p-dropdown [options]=\\\"loggedUsers\\\" placeholder=\\\"Selecione um funcionário\\\"\\n                  formControlName=\\\"user_final_id\\\" optionLabel=\\\"label\\\"></p-dropdown>\\n              </div>\\n              <p-message [style]=\\\"{ 'margin-top': '3px' }\\\" severity=\\\"error\\\" text=\\\"Selecione um funcionário\\\"\\n                *ngIf=\\\"isInputError('user_final_id')\\\"></p-message>\\n            </ion-col>\\n          </ion-row>\\n\\n          <ion-row class=\\\"ion-justify-content-end\\\">\\n            <ion-col class=\\\"ion-align-self-end\\\">\\n              <div class=\\\"btn-end\\\">\\n                <p-button label=\\\"Criar\\\" (onClick)=\\\"createTransacao()\\\" [disabled]=\\\"disableBTN()\\\" icon=\\\"pi pi-angle-right\\\"\\n                  iconPos=\\\"right\\\"></p-button>\\n              </div>\\n            </ion-col>\\n          </ion-row>\\n        </div>\\n      </ion-grid>\\n    </div>\\n  </form>\\n\\n</ion-content>\";"],"sourceRoot":"webpack:///"}